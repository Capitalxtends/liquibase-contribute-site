
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../snapshot-generator/">
      
      
        <link rel="next" href="../../../references/priority/">
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.2">
    
    
      
        <title>Sql generator - contribute.liquibase.com</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.f56500e0.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#defining-a-new-liquibasesqlgeneratorsqlgenerator-implementation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="contribute.liquibase.com" class="md-header__button md-logo" aria-label="contribute.liquibase.com" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            contribute.liquibase.com
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Sql generator
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../.." class="md-tabs__link">
      Welcome
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../development/" class="md-tabs__link">
        Development
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../" class="md-tabs__link md-tabs__link--active">
        Extensions
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="contribute.liquibase.com" class="md-nav__button md-logo" aria-label="contribute.liquibase.com" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    contribute.liquibase.com
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Development" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../development/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Extensions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Extensions" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Extensions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../best-practices/" class="md-nav__link">
        Best Practices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../extension-anatomy/" class="md-nav__link">
        Extension Anatomy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../your-first-extension/" class="md-nav__link">
        Your First Extension
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_5">
          Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Guides" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        Extension Guides
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5_2" type="checkbox" id="__nav_3_5_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_5_2">
          Additional database
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Additional database" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_5_2">
          <span class="md-nav__icon md-icon"></span>
          Additional database
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../database/" class="md-nav__link">
        liquibase.database.Database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../snapshot-generator/" class="md-nav__link">
        Snapshot generator
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Sql generator
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Sql generator
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#defining-a-new-liquibasesqlgeneratorsqlgenerator-implementation" class="md-nav__link">
    Defining a New liquibase.sqlgenerator.SqlGenerator Implementation
  </a>
  
    <nav class="md-nav" aria-label="Defining a New liquibase.sqlgenerator.SqlGenerator Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementing" class="md-nav__link">
    Implementing
  </a>
  
    <nav class="md-nav" aria-label="Implementing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#empty-constructor" class="md-nav__link">
    Empty Constructor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#supportssqlstatement-database" class="md-nav__link">
    supports(SqlStatement, Database)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getpriority" class="md-nav__link">
    getPriority()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validatesqlstatement-database-sqlgeneratorchange-and-warn" class="md-nav__link">
    validate(SqlStatement, Database, SqlGeneratorChange) and warn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generatesqlsqlstatement-database-sqlgeneratorchain" class="md-nav__link">
    generateSql(SqlStatement, Database, SqlGeneratorChain)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-your-class" class="md-nav__link">
    Register your Class
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-code" class="md-nav__link">
    Example Code
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6" type="checkbox" id="__nav_3_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_6">
          References
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="References" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          References
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/priority/" class="md-nav__link">
        Priority
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#defining-a-new-liquibasesqlgeneratorsqlgenerator-implementation" class="md-nav__link">
    Defining a New liquibase.sqlgenerator.SqlGenerator Implementation
  </a>
  
    <nav class="md-nav" aria-label="Defining a New liquibase.sqlgenerator.SqlGenerator Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementing" class="md-nav__link">
    Implementing
  </a>
  
    <nav class="md-nav" aria-label="Implementing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#empty-constructor" class="md-nav__link">
    Empty Constructor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#supportssqlstatement-database" class="md-nav__link">
    supports(SqlStatement, Database)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getpriority" class="md-nav__link">
    getPriority()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validatesqlstatement-database-sqlgeneratorchange-and-warn" class="md-nav__link">
    validate(SqlStatement, Database, SqlGeneratorChange) and warn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generatesqlsqlstatement-database-sqlgeneratorchain" class="md-nav__link">
    generateSql(SqlStatement, Database, SqlGeneratorChain)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-your-class" class="md-nav__link">
    Register your Class
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-code" class="md-nav__link">
    Example Code
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Sql generator</h1>

<h2 id="defining-a-new-liquibasesqlgeneratorsqlgenerator-implementation">Defining a New liquibase.sqlgenerator.SqlGenerator Implementation</h2>
<h3 id="overview">Overview</h3>
<p>Liquibase defines database-independent requests for an action in <a href="https://javadocs.liquibase.com/liquibase-core/liquibase/change/Change.html">liquibase.change.Change</a>
and <a href="https://javadocs.liquibase.com/liquibase-core/liquibase/statement/SqlStatement.html">liquibase.statement.SqlStatement</a>
classes. Change classes are what can be called from changelog files, and SqlStatement classes describe the lower-level calls that translate more directly to SQL statement.</p>
<p>Both <code>Change</code> and <code>SqlStatement</code> simply <em><strong>describe</strong></em> what wants to be done without specifying <strong><em>how</em></strong> to carry that out.
It is the job of the <code>SqlGenerator</code> to create the correct SQL for a given <code>Statement</code> definition.</p>
<pre><code class="language-mermaid">sequenceDiagram
    participant Change
    participant SqlStatement
    participant Executor
    participant SqlGenerator
    Change-&gt;&gt;SqlStatement: Creates
    Change-&gt;&gt;Executor: Passes Statement to run
    Executor-&gt;&gt;SqlGenerator: Finds best implementation
    SqlGenerator--&gt;&gt;Executor: Returns correct SQL for Statement
</code></pre>
<p>For example, when parsing a changelog file, Liquibase creates a <code>CreateTableChange</code> object with the table name and column definitions specified in the changelog file.
When the Change is "executed", it will first create a <code>CreateTableStatement</code> object containing the same information and pass that to the <code>Executor</code>. 
Liquibase will then go through all the available <code>SqlGenerators</code> that say they support <code>CreateTableStatement</code> for the given database and use the one with the
highest priority to come up with the actual SQL to run in order to create the table.</p>
<p>There will be existing <code>SqlGenerator</code> classes for all <code>SqlStatement</code>, and they will try to be database-generic, but sometimes the SQL is not valid for your database.</p>
<p>For example, the default <code>AddColumnGenerator</code> may return <code>"alter table "+dialect.quoteName(tableName) + " add column ..."</code> 
but for MySQL specifically it must be <code>"alter table "+dialect.quoteName(tableName) + " modify column ..."</code>.</p>
<p>Defining database-specific functionality tends to be writing <code>if (database instanceof ExampleDatabase)</code> blocks
around the non-standard calls. Using "instanceof" means the block will apply to any subclasses of the given database. 
For example, if your database is PostgreSQL compatible and therefore your Database class extensions <code>PostgresDatabase</code> then all the 
<code>if (database instanceof PostgresDatabase)</code> checks will be used for your database as well.</p>
<h3 id="implementing">Implementing</h3>
<p>When adding support for a new Database, there will be existing <code>SqlGenerator</code> implementations for all <code>SqlStatement</code> types. 
It is usually easiest to subclass the existing SqlGenerator to leverage the standard logic, but it's not necessary. </p>
<p>The naming pattern tends to be "StatementName" + "Generator". For example, AddColumnStatement -&gt; AddColumnGenerator.
Database-specific classes append the database name to the end, like <code>AddColumnGeneratorOracle</code> </p>
<h4 id="empty-constructor">Empty Constructor</h4>
<p>Like all Liquibase extensions, your SqlGenerator must have an empty constructor.</p>
<h4 id="supportssqlstatement-database">supports(SqlStatement, Database)</h4>
<p>The supports function returns whether this SqlGenerator should be used for the given SqlStatement and Database combination.</p>
<p>If you define your SqlGenerator class using generics, Liquibase will know the SqlStatement type you can support and not bother calling <code>supports()</code>
unless the SqlStatement class is correct. Therefore you only have to check that the Database object is correct. </p>
<p>You can normally check this with instanceof, but you can call methods on the Database object to check versions or whatever else may decide whether this class generates the correct SQL or not. </p>
<h4 id="getpriority">getPriority()</h4>
<p>You <strong><em>must</em></strong> override getPriority() so it will be picked over the base implementation you are extending. If you do not override this function they will both 
return the same priority and which is chosen is random.</p>
<p>To ensure a higher value is returned, use something like <code>return super.getPriority() + 5</code>.</p>
<h4 id="validatesqlstatement-database-sqlgeneratorchange-and-warn">validate(SqlStatement, Database, SqlGeneratorChange) and warn</h4>
<p>The validate method is used to check that the configuration of the SqlStatement is correct. It's the job of this function to ensure any required settings are set and
any invalid settings are not used. </p>
<p>When extending a base SqlGenerator, you can call <code>super.validate(statement, database, sqlGeneratorChain)</code> as a starting point, and then perform extra checks 
(or remove not-actually-invalid errors) before returning the <a href="https://javadocs.liquibase.com/liquibase-core/liquibase/exception/ValidationErrors.html">ValidationErrors</a>.</p>
<p>This method is always called, and so you do not need to re-validate settings in other methods.</p>
<p>If you have no additional validation to perform vs. the base logic there is no need to override this method.</p>
<p>The <code>warn(SqlStatement, Database, SqlGeneratorChange)</code> is similar to <code>validate</code> but returns non-fatal warnings to the user. </p>
<h4 id="generatesqlsqlstatement-database-sqlgeneratorchain">generateSql(SqlStatement, Database, SqlGeneratorChain)</h4>
<p>This is the method that generates the SQL for your particular database. It returns an array of <a href="https://javadocs.liquibase.com/liquibase-core/liquibase/sql/Sql.html">liquibase.sql.Sql</a>
objects and so a single <code>SqlStatement</code> class can create multiple underlying SQL statements. For example, <code>AddPrimaryKeyGenerator</code> may return a SQL call to add the primary key and another to reorganize the table.</p>
<p>Depending on how different your SQL is from the base class, you can either call <code>super.generateSql()</code> and modify the objects in the array before returning it, or 
create a new <code>Sql[]</code> array from scratch. It tends to be best to modify the SQL generated by the parent class because that keeps you from having to duplicate all the
argument handling logic that already exists in the parent.</p>
<p>Also remember to always check your parent class's method signature for settings it defines. It may have methods like <code>nullComesBeforeType()</code> which it uses to determine
the final SQL and you simply have to override that method to return a different value.</p>
<p><a href="https://javadocs.liquibase.com/liquibase-core/liquibase/sql/UnparsedSql.html">liquibase.sql.UnparsedSql</a> is the implementation of <code>Sql</code> you will almost always want to use in your <code>Sql[]</code> array.</p>
<p>When generating your SQL you should try as hard as possible to rely purely on the settings in the SqlStatement function to determine the SQL to generate.
If you have to query the database for more information or check any other external information you must ensure <code>generateStatementsIsVolatile()</code> returns true.
That lets Liquibase know that each run of the SqlStatement may generate different results and therefore can't be used in <code>update-sql</code> type operations.</p>
<h4 id="register-your-class">Register your Class</h4>
<p>Like all extensions, your SqlGenerator must be registered by adding your class name to <code>META-INF/services/liquibase.sqlgenerator.SqlGenerator</code></p>
<h3 id="example-code">Example Code</h3>
<pre><code class="language-java">package com.example.sqlgenerator;

import liquibase.database.Database;
import liquibase.sql.Sql;
import liquibase.sql.UnparsedSql;
import liquibase.sqlgenerator.SqlGeneratorChain;
import liquibase.sqlgenerator.core.AddColumnGenerator;
import liquibase.statement.core.AddColumnStatement;

public class AddColumnGeneratorExample extends AddColumnGenerator {
    @Override
    public int getPriority() {
        return super.getPriority() + 5;
    }

    @Override
    public Sql[] generateSql(AddColumnStatement statement, Database database, SqlGeneratorChain sqlGeneratorChain) {
        Sql[] originalSql = super.generateSql(statement, database, sqlGeneratorChain);

        return new Sql[] {
                new UnparsedSql(originalSql[0].toSql().replace(&quot;ALTER COLUMN&quot;, &quot;MODIFY COLUMN&quot;))
        };
    }
}
</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.sections"], "search": "../../../../assets/javascripts/workers/search.12658920.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.5cf534bf.min.js"></script>
      
    
  </body>
</html>